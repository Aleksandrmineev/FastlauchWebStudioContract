<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <title>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞</title>
    <style>
      :root {
        --bg: #0b0f14;
        --card: #121821;
        --text: #e6eef7;
        --muted: #a8b3c5;
        --accent: #4da3ff;
        --line: #1b2738;
        --radius: 16px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font: 500 16px/1.45 system-ui;
        padding: 16px;
      }
      .card {
        max-width: 940px;
        margin: auto;
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        padding: 16px;
      }
      h1 {
        margin: 0 0 8px;
        text-align: center;
      }
      .muted {
        color: var(--muted);
      }
      .grid {
        display: grid;
        gap: 12px;
      }
      .cols-2 {
        grid-template-columns: 1fr 1fr;
      }
      @media (max-width: 860px) {
        .cols-2 {
          grid-template-columns: 1fr;
        }
      }
      label {
        font-size: 14px;
        color: var(--muted);
      }
      input,
      textarea {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--line);
        border-radius: 10px;
        background: #0f1520;
        color: var(--text);
        font: 500 16px/1.45 system-ui;
      }
      textarea {
        min-height: 120px;
        resize: vertical;
      }
      .row {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .btn {
        appearance: none;
        border: 0;
        border-radius: 10px;
        padding: 10px 14px;
        font-weight: 700;
        cursor: pointer;
      }
      .btn-primary {
        background: var(--accent);
        color: #fff;
      }
      .btn-ghost {
        background: transparent;
        color: var(--text);
        border: 1px solid var(--line);
      }
      .out {
        margin-top: 12px;
        background: #0f1520;
        border: 1px dashed var(--line);
        border-radius: 10px;
        padding: 10px;
      }
      .linkbox {
        user-select: all;
        word-break: break-all;
        line-height: 1.35;
        cursor: pointer;
      }
      .pill {
        display: inline-block;
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 2px 8px;
        margin: 0 6px 0 0;
        color: #cbd5e1;
        font-size: 13px;
      }
      .hint {
        font-size: 13px;
        color: #a8b3c5;
      }
      .section-title {
        margin: 6px 0 2px;
        font-weight: 700;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞)</h1>
      <p class="muted" style="text-align: center; margin: 0 0 12px">
        –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –Ω–∏–∂–µ ‚Äî –ø–æ–ª—É—á–∏—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞. –°—Å—ã–ª–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç
        –¥–∞–Ω–Ω—ã–µ –≤ —Ö—ç—à–µ (<code>#...</code>) –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ.
      </p>

      <!-- –î–ê–ù–ù–´–ï –ü–û–î–†–Ø–î–ß–ò–ö–ê -->
      <div class="section-title">–î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</div>
      <section class="grid cols-2">
        <div>
          <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (vendor)</label
          ><input id="vendor" placeholder="FastLaunch Web Studio" />
        </div>
        <div>
          <label>–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å (vendorRep)</label
          ><input id="vendorRep" placeholder="–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ú–∏–Ω–µ–µ–≤" />
        </div>
        <div>
          <label>Email (vendorEmail)</label
          ><input
            id="vendorEmail"
            type="email"
            placeholder="hello@fastlaunch.pro"
          />
        </div>
        <div>
          <label>–ê–¥—Ä–µ—Å / –≥–æ—Ä–æ–¥ (vendorAddress)</label
          ><input id="vendorAddress" placeholder="Graz, √ñsterreich" />
        </div>
        <div style="grid-column: 1/-1">
          <label>–†–µ–∫–≤–∏–∑–∏—Ç—ã (vendorReg) ‚Äî –æ–ø—Ü.</label>
          <textarea
            id="vendorReg"
            placeholder="IBAN: AT12 3456 7890 1234 5678
          BIC: RZBAATWW
          –ö–∞—Ä—Ç–∞: 4111 1111 1111 1111
          USDT (TRC20): TNv..."
          ></textarea>
          <div class="hint">
            –°–æ–≤–µ—Ç: –ø–∏—à–∏ –ø–æ —Å—Ç—Ä–æ–∫–∞–º ‚Äî IBAN, BIC, –∫–∞—Ä—Ç–∞, –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª—ë–∫ –∏ —Ç.–ø. –≠—Ç–æ
            –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –∫–∞–∫ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤ –¥–æ–≥–æ–≤–æ—Ä–µ.
          </div>
        </div>
      </section>

      <div class="section-title" style="margin-top: 12px">–ü—Ä–æ–µ–∫—Ç</div>
      <section class="grid cols-2">
        <div>
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ / –¥–æ–º–µ–Ω (projectName)</label
          ><input id="projectName" placeholder="gardenrecovery.at" />
        </div>
        <div>
          <label>–¢–∏–ø —Ä–∞–±–æ—Ç (service)</label
          ><input
            id="service"
            placeholder="–°–æ–∑–¥–∞–Ω–∏–µ / –¥–æ—Ä–∞–±–æ—Ç–∫–∞ / –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∞–π—Ç–∞"
          />
        </div>
        <div>
          <label>–û–ø–∏—Å–∞–Ω–∏–µ (description) ‚Äî –∫—Ä–∞—Ç–∫–æ</label
          ><input
            id="description"
            placeholder="–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏, –∞–¥–∞–ø—Ç–∏–≤, —Ñ–æ—Ä–º—ã"
          />
        </div>
        <div>
          <label>–°—Ä–æ–∫ (deadline)</label
          ><input id="deadline" placeholder="14 –¥–Ω–µ–π —Å –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã" />
        </div>
        <div>
          <label>–°—Ç–æ–∏–º–æ—Å—Ç—å (price)</label
          ><input id="price" placeholder="800 ‚Ç¨" />
        </div>
        <div>
          <label>–£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã (paymentTerms)</label
          ><input
            id="paymentTerms"
            placeholder="50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞, 50% –ø–æ—Å–ª–µ —Å–¥–∞—á–∏"
          />
        </div>
        <div style="grid-column: 1/-1">
          <label>–ü–æ–¥—Ä–æ–±–Ω–æ–µ –¢–ó (spec)</label>
          <textarea
            id="spec"
            placeholder="–°—Ç—Ä–∞–Ω–∏—Ü—ã, –±–ª–æ–∫–∏, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–∞–≤–æ–∫‚Ä¶"
          ></textarea>
        </div>
        <div>
          <label>–°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ (support)</label
          ><input id="support" placeholder="14 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏" />
        </div>
        <div>
          <label>–ü–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (deliverables)</label
          ><input
            id="deliverables"
            placeholder="–ò—Å—Ö–æ–¥–Ω–∏–∫–∏, –¥–æ—Å—Ç—É–ø –≤ WP, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"
          />
        </div>
        <div style="grid-column: 1/-1">
          <label>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è (notes) ‚Äî –æ–ø—Ü.</label>
          <textarea
            id="notes"
            placeholder="–õ–∏—Ü–µ–Ω–∑–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤/—à—Ä–∏—Ñ—Ç–æ–≤ –Ω–µ –≤—Ö–æ–¥—è—Ç; —Ö–æ—Å—Ç–∏–Ω–≥ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∑–∞–∫–∞–∑—á–∏–∫–∞ –∏ —Ç.–ø."
          ></textarea>
        </div>
        <div>
          <label>URL –ø–æ–¥–ø–∏—Å–∏ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (vendorSignUrl) ‚Äî –æ–ø—Ü.</label>
          <input id="vendorSignUrl" placeholder="vendor-sign.png" />
        </div>
        <div>
          <label>–í–µ—Ä—Å–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ (version)</label
          ><input id="version" value="1.1.0" />
        </div>
      </section>

      <div class="row" style="justify-content: flex-end; margin-top: 12px">
        <button class="btn btn-ghost" id="reset">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button class="btn btn-primary" id="make">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
      </div>

      <div class="out" id="result" hidden>
        <div
          class="row"
          style="
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
          "
        >
          <div class="pill">–ì–æ—Ç–æ–≤–æ</div>
          <div class="row">
            <button class="btn btn-ghost" id="copyBtn" type="button">
              üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É
            </button>
            <button class="btn btn-primary" id="openBtn" type="button">
              –û—Ç–∫—Ä—ã—Ç—å
            </button>
          </div>
        </div>
        <div
          class="linkbox hint"
          id="linkBox"
          title="–ö–ª–∏–∫–Ω–∏, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å"
        ></div>
        <div class="hint" style="margin-top: 6px">
          –°—Å—ã–ª–∫–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ <code>contract.html</code> –≤ —ç—Ç–æ–π –∂–µ –ø–∞–ø–∫–µ.
          –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—ë –∫–ª–∏–µ–Ω—Ç—É –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ GitHub Pages/—Ö–æ—Å—Ç–∏–Ω–≥–µ.
        </div>
      </div>
    </div>

    <script>
      // ===== helpers =====
      const $ = (id) => document.getElementById(id);
      const fields = [
        "vendor",
        "vendorRep",
        "vendorEmail",
        "vendorAddress",
        "vendorReg",
        "projectName",
        "service",
        "description",
        "spec",
        "price",
        "paymentTerms",
        "deadline",
        "support",
        "deliverables",
        "notes",
        "version",
      ];

      // restore from localStorage
      (function restore() {
        try {
          const raw = localStorage.getItem("prepareDraft");
          if (!raw) return;
          const data = JSON.parse(raw);
          fields.forEach((k) => {
            if (data[k] != null) $(k).value = data[k];
          });
        } catch {}
      })();

      // autosave draft
      function saveDraft() {
        const data = {};
        fields.forEach((k) => (data[k] = $(k).value));
        localStorage.setItem("prepareDraft", JSON.stringify(data));
      }
      fields.forEach((k) => $(k).addEventListener("input", saveDraft));

      function encodeToHash(obj) {
        const json = JSON.stringify(obj);
        // base64 (UTF-8 safe)
        return btoa(unescape(encodeURIComponent(json)));
      }

      function buildUrl() {
        // base URL: contract.html —Ä—è–¥–æ–º
        let base;
        if (location.protocol.startsWith("http")) {
          // Live Server / —Ö–æ—Å—Ç–∏–Ω–≥
          const u = new URL(location.href);
          u.hash = "";
          const path = u.pathname.replace(/[^\/]+$/, "contract.html"); // replace current filename
          base = `${u.origin}${path}`;
        } else {
          // file://
          // –ü–æ–ø—Ä–æ–±—É–µ–º –∑–∞–º–µ–Ω–∏—Ç—å prepare.html –Ω–∞ contract.html –≤ –ø—É—Ç–∏
          base = location.href.replace(
            /prepare\.html(\?.*)?(#.*)?$/i,
            "contract.html"
          );
        }

        const data = {};
        fields.forEach((k) => (data[k] = $(k).value.trim()));
        return `${base}#${encodeToHash(data)}`;
      }

      async function copy(text) {
        try {
          await navigator.clipboard.writeText(text);
          return true;
        } catch {
          // fallback
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          return true;
        }
      }

      // actions
      $("make").addEventListener("click", () => {
        const url = buildUrl();
        $("result").hidden = false;
        $("linkBox").textContent = url;
        // auto copy once
        copy(url).catch(() => {});
      });

      $("copyBtn").addEventListener("click", async () => {
        const url = $("linkBox").textContent.trim();
        if (!url) return;
        await copy(url);
        $("copyBtn").textContent = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ";
        setTimeout(
          () => ($("copyBtn").textContent = "üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É"),
          1500
        );
      });

      $("linkBox").addEventListener("click", async () => {
        const url = $("linkBox").textContent.trim();
        if (!url) return;
        await copy(url);
        $("linkBox").classList.add("copied");
        $("linkBox").title = "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ";
        setTimeout(() => {
          $("linkBox").title = "–ö–ª–∏–∫–Ω–∏, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å";
        }, 1200);
      });

      $("openBtn").addEventListener("click", () => {
        const url = $("linkBox").textContent.trim() || buildUrl();
        window.open(url, "_blank");
      });

      $("reset").addEventListener("click", () => {
        fields.forEach((k) => ($(k).value = ""));
        saveDraft();
        $("result").hidden = true;
      });
    </script>
  </body>
</html>
